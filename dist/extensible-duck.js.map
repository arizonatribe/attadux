{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9e3dc13ee0a5a01469e8","webpack:///./src/extensible-duck.js"],"names":["typeValue","namespace","store","type","zipObject","keys","values","arguments","length","result","i","buildTypes","types","map","isObject","obj","isFunction","func","isUndefined","value","undefined","isPlainObject","constructor","Object","mergeDeep","target","sources","source","shift","Array","isArray","push","key","Error","assignDefaults","options","consts","creators","selectors","deriveSelectors","Duck","composedSelectors","forEach","initialState","call","name","reducer","bind","state","action","parent","duck","parentCreators","parentSelectors"],"mappings":"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","file":"extensible-duck.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Duck\"] = factory();\n\telse\n\t\troot[\"Duck\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9e3dc13ee0a5a01469e8","function typeValue(namespace, store, type) {\n  return `${namespace}/${store}/${type}`\n}\n\nfunction zipObject (keys, values) {\n  if (arguments.length == 1) {\n    values = keys[1];\n    keys = keys[0];\n  }\n    \n  var result = {};\n  var i = 0;\n  \n  for (i; i < keys.length; i += 1) {\n    result[keys[i]] = values[i];\n  }\n  \n  return result;\n};\n\nfunction buildTypes(namespace, store, types) {\n  return zipObject(\n    types,\n    types.map(type => typeValue(namespace, store, type))\n  )\n}\n\nfunction isObject(obj) {\n    return obj !== null && typeof obj === 'object';\n}\n\nfunction isFunction(func){\n   return func !== null && typeof func === 'function';\n}\n\nfunction isUndefined(value){\n   return typeof value === 'undefined' || value === undefined;\n}\n\nfunction isPlainObject(obj) {\n    return isObject(obj) && (\n        obj.constructor === Object  // obj = {}\n        || obj.constructor === undefined // obj = Object.create(null)\n    );\n}\n\nfunction mergeDeep(target, ...sources) {\n    if (!sources.length) return target;\n    const source = sources.shift();\n\n    if(Array.isArray(target)) {\n        if(Array.isArray(source)) {\n            target.push(...source);\n        } else {\n            target.push(source);\n        }\n    } else if(isPlainObject(target)) {\n        if(isPlainObject(source)) {\n            for(let key of Object.keys(source)) {\n                if(!target[key]) {\n                    target[key] = source[key];\n                } else {\n                    mergeDeep(target[key], source[key]);\n                }\n            }\n        } else {\n            throw new Error(`Cannot merge object with non-object`);\n        }\n    } else {\n        target = source;\n    }\n\n    return mergeDeep(target, ...sources);\n};\n\nfunction assignDefaults(options) {\n  return {\n    ...options,\n    consts: options.consts || {},\n    creators: options.creators || (() => ({})),\n    selectors: options.selectors || {},\n    types: options.types || [],\n  }\n}\n\n/**\n * Helper utility to assist in composing the selectors.\n * Previously defined selectors can be used to derive future selectors.\n * \n * @param {object} selectors \n * @param {class} Duck \n * @returns \n */\nfunction deriveSelectors(selectors, Duck) {\n  const composedSelectors = {}\n  Object.keys(selectors).forEach(key => {\n    if (isFunction(selectors[key])) {\n      if (isFunction(selectors[key](Duck.initialState || {}))) {\n        // check if its deriving function, if yes then invoke with previous selectors\n        composedSelectors[key] = selectors[key].call(null, composedSelectors)\n      } else {\n        // casual selector i.e. doesn't use other selectors to derive.\n        composedSelectors[key] = selectors[key]\n      }\n    }\n  })\n  return composedSelectors\n}\n\nexport default class Duck {\n  constructor(options) {\n    options = assignDefaults(options)\n    const {\n      namespace,\n      store,\n      types,\n      consts,\n      initialState,\n      creators,\n      selectors,\n    } = options\n    this.options = options\n    Object.keys(consts).forEach(name => {\n      this[name] = zipObject(consts[name], consts[name])\n    })\n\n    this.types = buildTypes(namespace, store, types)\n    this.initialState = isFunction(initialState)\n      ? initialState(this)\n      : initialState\n    this.reducer = this.reducer.bind(this)\n    this.selectors = deriveSelectors(selectors, this)\n    this.creators = creators(this)\n  }\n  reducer(state, action) {\n    if (isUndefined(state)) {\n      state = this.initialState\n    }\n    return this.options.reducer(state, action, this)\n  }\n  extend(options) {\n    if (isFunction(options)) {\n      options = options(this)\n    }\n    options = assignDefaults(options)\n    const parent = this.options\n    let initialState\n    if (isFunction(options.initialState)) {\n      initialState = duck => options.initialState(duck, this.initialState)\n    } else if (isUndefined(options.initialState)) {\n      initialState = parent.initialState\n    } else {\n      initialState = options.initialState\n    }\n    return new Duck({\n      ...parent,\n      ...options,\n      initialState,\n      consts: mergeDeep({}, parent.consts, options.consts),\n      creators: duck => {\n        const parentCreators = parent.creators(duck)\n        return { ...parentCreators, ...options.creators(duck, parentCreators) }\n      },\n      selectors: (() => {\n        const parentSelectors = parent.selectors\n        return {\n          ...parentSelectors,\n          ...options.selectors,\n        }\n      })(),\n      types: [...parent.types, ...options.types],\n      reducer: (state, action, duck) => {\n        state = parent.reducer(state, action, duck)\n        if (isUndefined(options.reducer)) {\n          return state\n        } else {\n          return options.reducer(state, action, duck)\n        }\n      },\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extensible-duck.js"],"sourceRoot":""}